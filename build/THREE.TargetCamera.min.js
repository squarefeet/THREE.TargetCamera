/**
 * THREE.TargetCamera.js 0.2.0
 * (c) 2013 Luke Moody (http://www.github.com/squarefeet)
 *
 * THREE.TargetCamera may be freely distributed under the MIT license
 *  (See the LICENSE file at root of this repository.)
 */
THREE.TargetCamera=function(a,b,c,d){THREE.Camera.call(this),this.fov=void 0!==a?a:50,this.aspect=void 0!==b?b:1,this.near=void 0!==c?c:.1,this.far=void 0!==d?d:2e3,this.targets={},this.currentTargetName=null,this._idealObject=new THREE.Object3D,this._isTransitioning=!1,this._defaults={name:null,targetObject:new THREE.Object3D,cameraPosition:new THREE.Vector3(0,30,50),cameraRotation:void 0,fixed:!1,stiffness:.4,matchRotation:!0},this.updateProjectionMatrix()},THREE.TargetCamera.prototype=Object.create(THREE.PerspectiveCamera.prototype),THREE.TargetCamera.prototype._translateIdealObject=function(a){var b=this._idealObject;0!==a.x&&b.translateX(a.x),0!==a.y&&b.translateY(a.y),0!==a.z&&b.translateZ(a.z)},THREE.TargetCamera.prototype._createNewTarget=function(){var a=this._defaults;return{name:a.name,targetObject:a.targetObject,cameraPosition:a.cameraPosition,cameraRotation:a.cameraRotation,fixed:a.fixed,stiffness:a.stiffness,matchRotation:a.matchRotation}},THREE.TargetCamera.prototype._determineCameraRotation=function(a){return a instanceof THREE.Euler?(new THREE.Quaternion).setFromEuler(a):a instanceof THREE.Quaternion?a:void 0},THREE.TargetCamera.prototype.addTarget=function(a){var b=this._createNewTarget();if("object"==typeof a)for(var c in a)b.hasOwnProperty(c)&&(b[c]="cameraRotation"===c?this._determineCameraRotation(a[c]):a[c]);this.targets[a.name]=b},THREE.TargetCamera.prototype.setTarget=function(a){this.targets.hasOwnProperty(a)?this.currentTargetName=a:console.warn("THREE.TargetCamera.setTarget: No target with name "+a)},THREE.TargetCamera.prototype.update=function(){var a=this.targets[this.currentTargetName],b=this._idealObject;a&&(a.fixed?(this.position.copy(a.cameraPosition),this.lookAt(a.targetObject.position)):(b.position.copy(a.targetObject.position),b.quaternion.copy(a.targetObject.quaternion),void 0!==a.cameraRotation&&b.quaternion.multiply(a.cameraRotation),this._translateIdealObject(a.cameraPosition),this.position.lerp(b.position,a.stiffness),a.matchRotation?this.quaternion.slerp(b.quaternion,a.stiffness):this.lookAt(a.targetObject.position)))};